<html>
  <head>
    <title>JS13K 2024: SUP3RFR1GHT VR</title>
    <script src="https://js13kgames.com/webxr-src/2024/aframe.js"></script>
    <script src="game.js"></script>
  </head>
  <body>
    <a-scene obb-collider="showColliders: false" debug-console>
      <a-entity id="title" level>
        <a-text
          value="SUP3RFR1GHT VR"
          align="center"
          color="#ef2d5e"
          font="monoid"
          width="20"
          position="0 3 -5"
        ></a-text>

        <a-text
          value="press GRIP to GRAB objects\npress TRIGGER to shoot or punch" position="0 1.8 -5"
          align="center" color="black" font="monoid" width="5" height="2"
        ></a-text>

        <a-portal to="#level_1" text-value="GRAB" text-width="1.75"
          position="0 1.25 -0.5"></a-portal>
      </a-entity>

      <a-entity id="level_1" level="gameTimeTracked: true">
        <!-- grabbable stuff -->
        <a-gun position="0 1.35 -0.5" gravity health="group: friend"></a-gun>
        <a-portal position="0 1.25 -0.5" to="#level_2" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-tetrahedron
          puppet
          radius="1" color="#ef2d5e" 
          position="0 1.5 -3" spin-motion="direction: 1 1 1; speed: 2"
          health="group: foe"
          dynamic-collider="size: 1"
        >
        </a-tetrahedron>

        <!-- room -->
        <a-plane width="30" height="4" color="#f8fbfe" rotation="0 90 0" position="-2 2 -5"></a-plane>
        <a-plane width="30" height="4" color="#f8fbfe" rotation="0 -90 0" position="2 2 -5"></a-plane>
        <a-plane width="30" height="4" color="#f8fbfe" rotation="90 90 0" position="0 4 -5"></a-plane>
        <a-plane width="30" height="4" color="#f8fbfe" rotation="-90 90 0" position="0 0 -5"></a-plane>
        <a-text value="TIME MOVES\nWHEN YOU MOVE" align="center" font="monoid" width="12" position="0 2 -5.5"></a-text>
      </a-entity>

      <a-entity id="level_2" level="gameTimeTracked: true">
        <!-- grabbable stuff -->
        <a-portal position="0 1.25 -0.5" to="#level_3" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-box
          puppet
          color="#ef2d5e"
          position="0 1 -2" spin-motion="direction: 1 0 0.5; speed: 2" sinlinear-motion="direction: 0 0 1"
          health="group: foe"
          dynamic-collider
        >
        </a-box>

        <!-- room -->
        <a-cylinder
          radius="3" height="30" segments-radial="5" segments-height="1"
          geometry="openEnded: true" material="color: #ddd; side: back"
          position="0 1.5 0" rotation="-90 0 0"
        >
          <a-text value="PUNCH THRU" align="center" font="monoid" width="15" position="0 5.5 0" rotation="90 0 0"></a-text>
        </a-cylinder>
      </a-entity>

      <!-- 3rd level should be "move your body" with enemy firing at the player -->
      <a-entity id="level_3" level="gameTimeTracked: true">
        <!-- grabbable stuff -->
        <a-gun position="0 1.2 -0.4" gravity health="group: friend"></a-gun>
        <a-portal position="0 1.2 -0.5" to="#level_4" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-cone
          puppet
          height="1" radius-bottom="0.2" radius-top="0.4" segments-radial="6" segments-height="1" color="#e26" 
          position="0 1.1 -3"
          health="group: foe"
          dynamic-collider
        >
          <a-dodecahedron position="0 0.75 0.15" radius="0.25" color="#EF2D5E"></a-dodecahedron>
          <a-entity spin-motion="direction: 0 1 0; speed: 2">
            <a-pyramid position="-0.7 0.25 0" rotation="0 0 95" scale="0.25 0.75 0.25" color="#EF2D5E"></a-pyramid>
            <a-pyramid position="0.7 0.25 0" rotation="0 0 -95" scale="0.25 0.75 0.25" color="#EF2D5E"></a-pyramid>
          </a-entity>
        </a-cone>

        <!-- room -->
        <a-box
          width="12" depth="12" height="5"
          color="#f8fbfe" material="side: back"
          position="0 2.5 -4"
        >
          <a-box width="1" depth="1" height="5" color="#f8fbfe"  position="3 0 3"></a-box>
          <a-box width="1" depth="1" height="5" color="#f8fbfe"  position="3 0 -3"></a-box>
          <a-box width="1" depth="1" height="5" color="#f8fbfe"  position="-3 0 3"></a-box>
          <a-box width="1" depth="1" height="5" color="#f8fbfe"  position="-3 0 -3"></a-box>
          <a-text value="13" align="center" font="monoid" width="15" position="0 1 -3"></a-text>
        </a-box>
      </a-entity>

      <a-entity id="level_4" level="gameTimeTracked: true">
        <!-- grabbable stuff -->
        <a-portal position="0 1.2 -0.5" to="#level_5" text-value="GRAB" text-width="1.75" visible="false"></a-portal>

        <!-- enemy -->
        <a-cone
          puppet
          position="0 0.9 -1.1"
          radius-bottom="0.2" radius-top="0.4" segments-radial="6" segments-height="1"
          color="#e26" 
          health="group: foe"
          dynamic-collider
        >
          <a-dodecahedron position="0 0.75 0.15" radius="0.25" color="#EF2D5E"></a-dodecahedron>
          <a-entity position="0.48 0.05 0" rotation="180 0 -45">
            <a-pyramid spin-motion="direction: 0 -1 0" scale="0.25 0.75 0.25" color="#EF2D5E"></a-pyramid>
          </a-entity>
          <a-entity position="-0.48 0.05 0" rotation="180 0 45" >
            <a-pyramid spin-motion="direction: 0 1 0" scale="0.25 0.75 0.25" color="#EF2D5E"></a-pyramid>
          </a-entity>
        </a-cone>
      
        <a-text value="13" align="center" font="monoid" width="15" position="0 2.5 -5.5"></a-text>
        <!-- room -->
        <a-cylinder
          radius="3" height="30" segments-radial="6" segments-height="1" theta-start="30"
          geometry="openEnded: true" material="color: #ddd; side: back"
          position="0 1.5 0" rotation="-90 0 0"
          >
        </a-cylinder>
      </a-entity>

      <a-sky color="#ddd"></a-sky>
      <a-sphere id="world" color="blue" radius="1000" material="shader: flat; wireframe: true; side: back"></a-sphere>

      <a-camera motion-tracker wasd-controls="acceleration:25">
        <!-- sorta HUD -->
        <a-text 
          value="0.00s"
          align="center"
          color="black"
          font="monoid"
          position="0 0.65 -1.5"
          game-time
          ></a-text>
        <!-- sorta player head & body -->
        <a-box id="player"
               height="1.8"
               width="0.5"
               depth="0.3"
               position="0 0.9 0.35"
               obb-collider
               health="group: friend"
        ></a-box>
      </a-camera>

      <a-entity id="left"
                hand-controls="hand: left; handModelStyle: toon"
                position="-0.5 1 0"
                health="group: friend"
                obb-collider="size: 0.1"
                motion-tracker
                gesture-tracker
      ></a-entity>
      <a-entity id="right"
                hand-controls="hand: right; handModelStyle: toon"
                position="0.5 1 0"
                health="group: friend"
                obb-collider="size: 0.1"
                motion-tracker
                gesture-tracker
      ></a-entity>

    </a-scene>
  </body>
</html>
